version: 2

name: sf_dbt

sf_dbt:
  models:
    transform:
      +schema: transform
      materialized: view
      tags: ['transform']

      customers:
        primary_key: [customer_key]
        columns:
          - name: CUSTOMER_KEY
            description: unique key for each order for customer
            tests:
              - dbt_expectations.expect_column_values_to_be_unique:
                  row_condition: "id is not null"

      int_order_items:
        materialized: ephemeral
        primary_key: [order_item_key]

      order_items:
        primary_key: [order_item_key]

      nations:
        primary_key: [nation_key]

      orders:
        primary_key: [order_key]

      part_suppliers:
        primary_key: [part_supplier_key]

      parts:
        primary_key: [part_key]

      regions:
        primary_key: [region_key]

      suppliers:
        primary_key: [supplier_key]
